(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[488],{18665:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/songless",function(){return s(95121)}])},32669:function(e,t,s){"use strict";var r=s(85893),l=s(57747);t.Z=e=>{let{children:t}=e;return(0,r.jsx)(l.xu,{flex:"1",py:"6",children:t})}},95121:function(e,t,s){"use strict";s.r(t);var r=s(85893),l=s(67294),n=s(87066),a=s(15130),i=s(45161),o=s(7963),c=s(18618),u=s(20967),d=s(95962),g=s(48783),h=s(70959),x=s(44461),f=s(24124),p=s(71293),m=s(27239),y=s(36948),j=s(93717),b=s(57747),w=s(49289),S=s(34292),k=s(89993),v=s(81136),C=s(73353),_=s(82140),z=s(32735),O=s(71025),$=s(93108),E=s(35541),W=s(19778),N=s(14581),R=s(64859),T=s(54346),A=s(8371),D=s(14253),P=s(78590),I=s(41766),J=s(287),M=s(43345),U=s(43549),Z=s(32669),K=s(85837),F=s(30754),L=s(89710),q=s(47041),G=s(53059),H=s(90109),Y=s(11163),Q=s(95050);let X=[.12,.5,2,4,8,15],B=[.1,.5,2,4,8,15],V=["All","Rock","Hip Hop"],ee=e=>(0,r.jsx)(g.g,{align:"center",w:"full",children:e.track&&(0,r.jsxs)(g.g,{pt:4,spacing:-1,children:[(0,r.jsx)(p.x,{fontWeight:"bold",fontSize:"2xl",children:e.track.track}),(0,r.jsx)(p.x,{mt:1,fontSize:"md",children:e.track.artist})]})}),et=e=>(0,r.jsx)(D.m,{children:(0,r.jsx)(m.M,{w:"100%",children:(0,r.jsxs)(P.h,{mt:6,children:[(0,r.jsx)(k.h,{"aria-label":"Home",icon:(0,r.jsx)(y.J,{as:Q.x_l,boxSize:"6"}),w:12,h:10,onClick:()=>e.router.push("/")}),(0,r.jsx)($.z,{onClick:async()=>{let t=`Songless ${V[e.genre]} #${e.challengeNumber} `;for(let s of e.guesses)-1===s.state?t+="⬜️":0===s.state?t+="⬛️":1===s.state?t+="\uD83D\uDFE5":2===s.state&&(t+="\uD83D\uDFE9");try{await (0,F.d)(t),e.toast({title:"Copied to clipboard",status:"success"})}catch{e.toast({title:"Failed to copy to clipboard :(",description:"If you need help, reach out to our support.",status:"error"})}},children:"Share"}),e.genresAvailability.some(e=>!0===e)&&(0,r.jsx)($.z,{onClick:t=>{e.closeModal?.(t),e.resetGame?.()},children:"Next"})]})})});async function es(e){return(await fetch(e)).ok}t.default=()=>{let e=(0,Y.useRouter)(),{colorMode:t,toggleColorMode:s}=(0,i.If)(),D=(0,o.p)(),[P]=(0,c.a)("(max-height: 900px)"),F=(0,L.rE)(),[er,el]=(0,l.useState)(0),[en,ea]=(0,l.useState)(V.map(e=>!1)),ei=(0,l.useRef)(V.map(e=>null)),[eo,ec]=(0,l.useState)(!1),eu=(0,u.q)(),ed=(0,u.q)(),[eg,eh]=(0,l.useState)(!1),[ex,ef]=(0,l.useState)(!0),[ep,em]=(0,l.useState)(!1),[ey,ej]=(0,l.useState)(),[eb,ew]=(0,l.useState)([{state:-1,value:""},{state:-1,value:""},{state:-1,value:""},{state:-1,value:""},{state:-1,value:""},{state:-1,value:""}]),[eS,ek]=(0,l.useState)(!1),[ev,eC]=(0,l.useState)(0),[e_,ez]=(0,l.useState)(0),[eO,e$]=(0,l.useState)(""),eE=(0,l.useRef)(null),eW=(0,l.useRef)(0),[eN,eR]=(0,d.k)(!1),[eT,eA]=(0,d.k)(!1),[eD,eP]=(0,l.useState)([]),[eI,eJ]=(0,l.useState)(),[eM,eU]=(0,l.useState)(),[eZ,eK]=(0,d.k)(!1),[eF,eL]=(0,l.useState)({}),eq=(0,l.useRef)(null),eG=(0,l.useRef)(!1);(0,l.useRef)([]);let[eH,eY]=(0,l.useState)(0),eQ=(0,l.useRef)(),eX=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(eA.off(),eR.off(),eP([]),eG.current||eK.off(),eG.current=!1,""==eO||eZ){eE.current=1/0;return}setTimeout(async()=>{if(new Date-eE.current>=500){eA.on(),eR.on();try{let e=(await n.Z.get(`https://ws.audioscrobbler.com/2.0/?method=track.search&track=${eO}&limit=6&api_key=cc3138d654109532637ab34b80d95580&format=json`)).data.results.trackmatches.track;for(let t of e)t.query=eO,delete t.image,delete t.listeners,delete t.mbid,delete t.streamable,delete t.url;eP(e),eR.off()}catch{eA.off(),eR.off(),eP([])}}},500),eE.current=new Date},[eO]),(0,l.useEffect)(()=>(eS?eX.current=setInterval(eB,30):clearInterval(eX.current),()=>{clearInterval(eX.current)}),[eS]),(0,l.useEffect)(()=>((0,H.QT)((0,H.JU)(a.vo,"songless","game","today","data")).then(e=>{e.exists()&&eJ(e.data())}),()=>{eQ.current?.pause()}),[]),(0,l.useEffect)(()=>{if(eI){let e=Array.from({length:eI.genres},()=>!0);if((0,q.hasCookie)("songless-lastPlayed")){let t=JSON.parse((0,q.getCookie)("songless-lastPlayed"));for(let s=0;s<t.length;s++)t[s]===F.getDateString()?e[s]=!1:(e[s]=!0,t[s]&&(0,q.deleteCookie)("songless-lastPlayed"));if(e.every(e=>!1==e)){ef(!1);return}el(t.indexOf(t.find(e=>e!==F.getDateString())))}ea(e)}},[eI]);let eB=()=>{null!=eQ.current&&(eY((0,U.UI)(eQ.current.seek(),0,eQ.current.duration(),0,100)),eQ.current.playing()&&eQ.current.seek()>=X[ev]&&(ek(!1),eQ.current.pause(),eW.current=eQ.current.seek()))},eV=async e=>{e(),clearInterval(eX.current),null==eQ.current||eQ.current.playing()||(eQ.current.seek(eW.current),eQ.current.play());let t=Array.from({length:eI.genres},()=>null);(0,q.hasCookie)("songless-lastPlayed")&&(t=JSON.parse((0,q.getCookie)("songless-lastPlayed"))),t[er]=F.getDateString(),(0,q.setCookie)("songless-lastPlayed",t);let s=en.slice();s[er]=!1,ea(s);try{await (0,H.ET)((0,H.hJ)(a.vo,"songless","game","today","statistics",er.toString()),{time:B[ev]})}catch{console.error("Error logging score")}try{let e=await (0,H.QT)((0,H.JU)(a.vo,"songless","game","today","statistics",er.toString(),"endpoint"));if(e.exists()){let t=e.data();t.participants++,t.timeSum+=B[ev],ej(t)}}catch{console.error("Error fetching stats")}},e0=async e=>{(0,G.Kz)(a.cp,"game_songless_start_game",{genre:V[e]}),em(!0);try{let t=await (0,H.QT)((0,H.JU)(a.vo,"songless","game","today",e.toString()));if(t.exists()){let s;let r=t.data();eU(r),ei.current[e]?s=ei.current[e]:(s=`https://cdn.lessgames.com/legacy/songless/${r.date}/${e}.mp3`,await es(s)?ei.current[e]=s:ei.current[e]=`https://cdn.lessgames.com/legacy/songless/${r.date}/${e}.aac`),null!=eQ.current&&eQ.current.unload(),eQ.current=new I.Howl({src:[ei.current[e]],volume:.5}),eQ.current.seek(0),eQ.current.once("load",()=>{eh(!0),em(!1)})}}catch{D({title:"Something Went Wrong",status:"error",isClosable:!0}),em(!1)}},e1=async()=>{let e=JSON.parse((0,q.getCookie)("songless-lastPlayed")),t=e.indexOf(e.find(e=>e!==F.getDateString()));eQ.current&&eQ.current.stop(),el(t),ew([{state:-1,value:""},{state:-1,value:""},{state:-1,value:""},{state:-1,value:""},{state:-1,value:""},{state:-1,value:""}]),ek(!1),eC(0),ez(0),e$(""),eP([]),eL({}),ec(!1),eY(0),eE.current=null,eW.current=0,eR.off(),eA.off(),eK.off(),await e0(t)};return(0,r.jsxs)(J.Z,{small:!0,scroll:!0,children:[(0,r.jsx)(M.Z,{name:"Songless",description:"",showTitle:!0}),eg?(0,r.jsx)(Z.Z,{children:(0,r.jsxs)(g.g,{position:"relative",spacing:P?20:[20,24,32,36],children:[!eo&&(0,r.jsx)(h.m,{position:"absolute",top:"-24px",width:"full",align:"center",variant:"enclosed",transform:"scale(1, -1)",index:er,onChange:async e=>{el(e),await e0(e)},children:(0,r.jsx)(x.t,{children:V.map((e,t)=>(0,r.jsx)(f.O,{color:"white",fontSize:{base:"xs",md:"sm",lg:"md"},isDisabled:ep||!en[t],children:(0,r.jsx)(p.x,{transform:"scale(1, -1)",children:e})},t))})}),(0,r.jsx)(g.g,{mt:eo?[4,8,12]:"10 !important",width:"full",children:eb.map((e,t)=>(0,r.jsxs)(m.M,{position:"relative",width:["100%","30rem","36rem"],height:["44px",12],bg:-1===e.state?"gray.800":0===e.state?"gray.600":1===e.state?"lessgames.red":2===e.state?"lessgames.green":"",borderRadius:"sm",borderWidth:2,borderStyle:"solid",borderColor:0===e.state||-1===e.state?"gray.600":"rgba(0,0,0,0)",transition:"background-color 200ms",children:[0===e.state?(0,r.jsx)(y.J,{position:"absolute",left:3,w:4,h:4,color:"white",as:Q.Z1Y}):1===e.state?(0,r.jsx)(y.J,{position:"absolute",left:3,w:4,h:4,color:"white",stroke:"white",strokeWidth:2,as:Q._0w}):2===e.state?(0,r.jsx)(y.J,{position:"absolute",left:3,w:5,h:5,color:"white",as:Q.l_A}):null,(0,r.jsx)(p.x,{fontFamily:"heading",fontWeight:"bold",color:0===e.state?"gray.100":"white",letterSpacing:0===e.state?4:0,children:-1===e.state?"":e.value})]},t))}),(0,r.jsxs)(j.k,{position:"relative",width:"full",direction:"column",align:"center",children:[!ep&&(0,r.jsx)(g.g,{spacing:1,align:"center",position:"absolute",left:`max(calc(${100*B[ev]/eQ.current.duration()/2+"%"} - 37px), 0px)`,top:-14,transition:"left 200ms",children:(0,r.jsxs)(g.g,{spacing:-1,children:[(0,r.jsxs)(p.x,{color:"lessgames.green",fontWeight:"semibold",fontSize:{base:"md",lg:"lg"},children:["Stage ",ev+1]}),(0,r.jsxs)(p.x,{color:"white",fontSize:{base:"sm",lg:"md"},children:[B[ev]," Seconds"]})]})}),(0,r.jsxs)(g.g,{width:"full",position:"relative",children:[(0,r.jsxs)(b.xu,{width:"full",position:"relative",children:[(0,r.jsx)(b.xu,{boxSizing:"content-box",width:"full",height:4,bg:"gray.700",transform:"translateY(-2px)",borderRadius:"sm",borderWidth:"2px",borderStyle:"solid",borderColor:"black",outline:"2px solid rgba(255,255,255,0.8)"}),(0,r.jsx)(b.xu,{position:"absolute",borderLeftRadius:"sm",top:0,width:`${eH}%`,height:4,bg:"white"}),!ep&&X.map((e,t)=>(0,r.jsx)(w.i,{height:4,opacity:1,borderColor:"black",orientation:"vertical",position:"absolute",top:"0",left:100*e/eQ.current.duration()+"%"},t))]}),(0,r.jsxs)(S.U,{justify:"space-between",width:"full",children:[(0,r.jsx)(p.x,{color:"white",children:"0:00"}),(0,r.jsx)(p.x,{color:"white",children:"0:30"})]})]}),(0,r.jsx)(k.h,{colorScheme:"green",width:14,height:14,borderRadius:"full",mt:[-4,-2,0],mb:{base:4,lg:6},"aria-label":eS?"Pause":"Play",icon:eS?(0,r.jsx)(Q.Wh,{}):(0,r.jsx)(Q.gmG,{}),onClick:()=>{ek(e=>!e),null!=eQ.current&&(ec(!0),eQ.current.playing()?eQ.current.pause():(eQ.current.seek()>=X[ev]&&eQ.current.seek(0),eQ.current.play()))},isLoading:ep}),(0,r.jsxs)(g.g,{position:"relative",width:["100%","30rem","36rem"],children:[(0,r.jsxs)(g.g,{position:"absolute",bottom:"104px",width:{base:"104%",lg:"100%"},height:eN?24:"auto",py:3,spacing:0,bg:"lessgames.black",borderRadius:"md",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.700",transition:"opacity 200ms",opacity:eT?"1":"0",children:[eN&&(0,r.jsx)(m.M,{height:"full",children:(0,r.jsx)(v.$,{color:"white",size:"lg"})}),eD.map((e,t)=>(0,r.jsx)(S.U,{spacing:6,width:"full",px:5,py:2,transition:"background-color 150ms",_hover:{backgroundColor:"gray.800",cursor:"pointer"},onClick:()=>{eL(e),eq.current.focus(),eK.on(),eG.current=!0,e$(`${e.name} - ${e.artist}`),eA.off(),eR.off()},children:(0,r.jsx)(p.x,{color:"gray.50",children:(0,r.jsx)(C.y$,{query:e.query,styles:{color:"white",fontWeight:"bold"},children:`${e.name} - ${e.artist}`})})},t))]}),(0,r.jsxs)(_.B,{children:[(0,r.jsx)(z.Z,{height:"full",pointerEvents:"none",children:(0,r.jsx)(y.J,{as:Q.XPI,color:"gray.300"})}),(0,r.jsx)(O.I,{size:"lg",color:"white",focusBorderColor:"gray.200",placeholder:"Know it? Search for the title",value:eO,onChange:e=>{e$(e.target.value),eL({})}})]}),(0,r.jsxs)(S.U,{width:"full",justify:"space-between",children:[(0,r.jsx)($.z,{variant:"primary-gray",isDisabled:ep||eS,onClick:()=>{(0,G.Kz)(a.cp,"game_songless_skip",{stage:ev+1}),ec(!0),eC(ev+1);let e=eb.slice();e[e_].state=0,e[e_].value="SKIPPED",ew(e),e_+1>=eb.length?((0,G.Kz)(a.cp,"game_songless_lose",{genre:V[er],stage:ev+1}),eV(ed.onOpen)):ez(e_+1)},children:"Skip"}),(0,r.jsx)($.z,{colorScheme:"green",isDisabled:!eZ,ref:eq,onClick:()=>{(0,G.Kz)(a.cp,"game_songless_guess",{guess:`${eF.name} - ${eF.artist}`,stage:ev+1}),ec(!0);let e=eb.slice();e[e_].value=`${eF.name} - ${eF.artist}`;let t=(0,U.Ay)(eM?.artist,eF.artist),s=(0,U.Ay)(eM?.track,eF.name);if(t<=4&&s<=4){(0,G.Kz)(a.cp,"game_songless_win",{genre:V[er],stage:ev+1}),e[e_].state=2,eV(eu.onOpen),ew(e);return}eM?.artist.toLowerCase()==eF.artist.toLowerCase()&&eF.name.replace(/[\u2019\u0027]/g,"'").toLowerCase().includes(eM?.track.replace(/[\u2019\u0027]/g,"'").toLowerCase())?(e[e_].state=2,eV(eu.onOpen),ew(e)):e[e_].state=1,ew(e),eC(ev+1),e_+1>=eb.length?((0,G.Kz)(a.cp,"game_songless_lose",{genre:V[er],stage:ev+1}),eV(ed.onOpen)):(ez(e_+1),e$(""),eL({}))},children:"Submit"})]})]})]})]})}):(0,r.jsx)(K.Z,{router:e,state:K.j.FUNCTIONING,canPlay:ex&&null!=eI,isLoading:ep,serverTime:F,onStart:async()=>e0(er),children:(0,r.jsx)(p.x,{color:"white",fontSize:["2xl","3xl","4xl"],fontWeight:"bold",children:(0,r.jsx)(C.y$,{query:"guess the song",styles:{color:"lessgames.green"},children:"Try to guess the song from listening to small parts of it"})})}),(0,r.jsxs)(E.u_,{onClose:ed.onClose,isOpen:ed.isOpen,size:{base:"xs",md:"md"},closeOnOverlayClick:!1,isCentered:!0,children:[(0,r.jsx)(W.Z,{}),(0,r.jsxs)(N.h,{children:[(0,r.jsx)(R.x,{bg:"lessgames.red",borderTopRadius:"md",py:4,children:(0,r.jsx)(p.x,{textAlign:"center",color:"white",children:"Game Over"})}),(0,r.jsxs)(T.f,{children:[(0,r.jsxs)(p.x,{textAlign:"center",pt:6,children:[["Close one!","Close call!","Nice try!"][Math.floor(3*Math.random())]," ","Today's track was:"]}),(0,r.jsx)(ee,{track:eM}),(0,r.jsx)(S.U,{w:"full",justify:"center",my:4,children:(0,r.jsx)(A.Vp,{fontWeight:"bold",children:V[er]})}),(0,r.jsx)(w.i,{}),(0,r.jsxs)(m.M,{py:4,children:[(0,r.jsx)(p.x,{display:"inline",fontSize:"xs",children:"Today's Average:"}),(0,r.jsxs)(p.x,{ml:1,display:"inline",fontWeight:"bold",fontSize:"xs",children:[ey?(ey.timeSum/ey.participants).toFixed(2):" ..."," seconds"]})]})]}),(0,r.jsx)(et,{router:e,challengeNumber:(0,L.Sz)(eM?.date,"21.11.2023")+1,genre:er,guesses:eb,genresAvailability:en,closeModal:ed.onClose,resetGame:e1,toast:D})]})]}),(0,r.jsxs)(E.u_,{onClose:eu.onClose,isOpen:eu.isOpen,size:{base:"xs",md:"md"},closeOnOverlayClick:!1,isCentered:!0,children:[(0,r.jsx)(W.Z,{}),(0,r.jsxs)(N.h,{children:[(0,r.jsx)(R.x,{bg:"lessgames.green",borderTopRadius:"md",py:4,children:(0,r.jsx)(p.x,{textAlign:"center",color:"white",children:"You Won!"})}),(0,r.jsxs)(T.f,{children:[(0,r.jsx)(ee,{track:eM}),(0,r.jsx)(S.U,{w:"full",justify:"center",my:4,children:(0,r.jsx)(A.Vp,{fontWeight:"bold",children:V[er]})}),(0,r.jsx)(w.i,{}),(0,r.jsxs)(b.xu,{pt:6,children:[(0,r.jsxs)(p.x,{textAlign:"center",children:["You successfully identified the track in",ev<3?" only":""]}),(0,r.jsxs)(p.x,{textAlign:"center",fontWeight:"bold",fontSize:"xl",children:[B[ev]," seconds"]})]}),(0,r.jsxs)(m.M,{pt:8,children:[(0,r.jsx)(p.x,{display:"inline",fontSize:"xs",children:"Today's Average:"}),(0,r.jsxs)(p.x,{ml:1,display:"inline",fontWeight:"bold",fontSize:"xs",children:[ey?(ey.timeSum/ey.participants).toFixed(2):" ..."," seconds"]})]})]}),(0,r.jsx)(et,{router:e,challengeNumber:(0,L.Sz)(eM?.date,"21.11.2023")+1,genre:er,guesses:eb,genresAvailability:en,closeModal:eu.onClose,resetGame:e1,toast:D})]})]})]})}},30754:function(e,t,s){"use strict";async function r(e,t){return"share"in Object.keys(navigator)?await l(e,t):n(e),!0}s.d(t,{d:function(){return r}});let l=async(e,t)=>{if(navigator.share)await navigator.share({title:t||"",text:e});else throw Error("Navigator not supported")},n=e=>{navigator.clipboard.writeText(e)}}},function(e){e.O(0,[151,396,660,486,619,817,11,888,774,179],function(){return e(e.s=18665)}),_N_E=e.O()}]);
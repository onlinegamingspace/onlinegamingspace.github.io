<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Cache-Control" content="no-cache,no-store,must-revalidate" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <script src="./cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" type="text/javascript"></script>
  <meta name="robots" content="noindex,nofollow" />
	<script type="text/javascript" src="./cloak-1.js"></script>
  <meta name="author" content="Freeway Interactive, html5@3wayint.com" />

  <style>
    html,
    body {
      padding: 0px;
      margin: 0px;
      border: 0px;

      height: 100%;

      touch-action-delay: none;
      touch-action: none;
      -ms-touch-action: none;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;

      overflow: hidden;
    }

    #viewport {
      position: absolute;

      width: 100%;
      height: 100%;

      background-image: url(viewport.jpg);
      background-size: cover;
      background-position: center;
    }

    #canvas {
      position: absolute;

      width: 100vw;
      height: 56.25vw;
      /* height:width ratio = 9/16 = .5625  */
      max-height: 100vh;
      max-width: 177.78vh;
      /* 16/9 = 1.778 */

      left: 0;
      right: 0;
      margin: auto;

      cursor: default;
    }

    #canvas:focus {
      outline: none;
    }

    #preloader {
      display: block;
      position: absolute;
      top: 0px;
      left: 0px;

      background-image: url(preloader.jpg);
      background-size: cover;
      background-position: center;

      width: 100%;
      height: 100%;
    }

    #preloader_wheel {
      position: absolute;
      top: 2em;
      right: 2em;
    }

    .button {
      width: 174px;
      text-decoration: none;
      text-align: center;
      padding: 11px 64px;
      border: solid 1px #004F72;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      font: 18px Arial, Helvetica, sans-serif;
      font-weight: bold;
      color: #ffffff;
      background-color: #92eb9b;
      background-image: -moz-linear-gradient(top, #92eb9b 0%, #084504 100%);
      background-image: -webkit-linear-gradient(top, #92eb9b 0%, #084504 100%);
      background-image: -o-linear-gradient(top, #92eb9b 0%, #084504 100%);
      background-image: -ms-linear-gradient(top, #92eb9b 0%, #084504 100%);
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#084504', endColorstr='#084504', GradientType=0);
      background-image: linear-gradient(top, #92eb9b 0%, #084504 100%);
      -webkit-box-shadow: 0px 0px 2px #bababa, inset 0px 0px 1px #ffffff;
      -moz-box-shadow: 0px 0px 2px #bababa, inset 0px 0px 1px #ffffff;
      box-shadow: 0px 0px 2px #bababa, inset 0px 0px 1px #ffffff;
    }

    .button:hover {
      filter: brightness(1.15);
    }

    #orientation {
      position: absolute;
      width: 100vw;
      height: 100vh;
      background-color: white;
    }

    #orientation img {
      position: absolute;
      width: 40vw;
      height: auto;
      left: 0;
      right: 0;
      margin: 0 auto;
      top: 30vh;
    }

    @media screen and (orientation:landscape) {
      #orientation {
        display: none;
      }
    }

    @media screen and (orientation:portrait) {
      #orientation {
        display: block;
      }
    }
  </style>

  <script type="text/javascript">
    function gtag(e1,e2,e3){
  
}
    var DEV_VERSION = false;
      var REVISION = null;
      var _DEBUG = false; // REMEMBERME
  </script>

  <script type="text/javascript">
    var QUERY_PARAMS = new Object();    
      (function () {
        var e,
          a = /\+/g,  // Regex for replacing addition symbol with a space
          r = /([^&=]+)=?([^&]*)/g,
          d = function (s) { return decodeURIComponent(s.replace(a, " ")); },
          q = window.location.search.substring(1);
        while( e = r.exec(q) )
          QUERY_PARAMS[d(e[1])] = d(e[2]);
      })();
      
      var GAME_ID = 'subway';
      var NOCACHE = '?nocache' + ((new Date).getTime() % 99999);
      var PACKAGES_PATH = 'data/';
      var FS_BASEPATH = "thug";     
            var gamemodule_path = '';
      var PACKAGE_FILE_EXT = '.png';
      var WASM_FILE_EXT = 'wasm';
      var BROWSER_LANG = (navigator.languages && navigator.languages[0] || navigator.language || navigator.userLanguage).split('-')[0].toLowerCase();
      var EXACT_LANG = QUERY_PARAMS.locale || BROWSER_LANG;
                
      function trace(){if(void 0!=window.console&&"function"==typeof window.console.log){var o=Array.prototype.slice.call(arguments,0);try{window.console.log.apply(window.console,o)}catch(n){}}}            
      function LoadScript(e,t){var n,a=document.createElement("script");a.setAttribute("src",e),a.onreadystatechange=a.onload=function(){n||(n=!0,t&&t())},document.getElementsByTagName("head")[0].appendChild(a)}
      
      (function(){'use strict';var module={options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],dataos:[{name:'Windows Phone',value:'Windows Phone',version:'OS'},{name:'Windows',value:'Win',version:'NT'},{name:'iPhone',value:'iPhone',version:'OS'},{name:'iPad',value:'iPad',version:'OS'},{name:'Kindle',value:'Silk',version:'Silk'},{name:'Android',value:'Android',version:'Android'},{name:'PlayBook',value:'PlayBook',version:'OS'},{name:'BlackBerry',value:'BlackBerry',version:'/'},{name:'Macintosh',value:'Mac',version:'OS X'},{name:'Linux',value:'Linux',version:'rv'},{name:'Palm',value:'Palm',version:'PalmOS'}],databrowser:[{name:'Chrome',value:'Chrome',version:'Chrome'},{name:'Firefox',value:'Firefox',version:'Firefox'},{name:'Safari',value:'Safari',version:'Version'},{name:'Internet Explorer',value:'MSIE',version:'MSIE'},{name:'Opera',value:'Opera',version:'Opera'},{name:'BlackBerry',value:'CLDC',version:'CLDC'},{name:'Mozilla',value:'Mozilla',version:'Mozilla'}],init:function(){var agent=this.header.join(' '),os=this.matchItem(agent,this.dataos),browser=this.matchItem(agent,this.databrowser);window.os=os;window.browser=browser;},matchItem:function(string,data){var i=0,j=0,html='',regex,regexv,match,matches,version;for(i=0;i<data.length;i+=1){regex=new RegExp(data[i].value,'i');match=regex.test(string);if(match){regexv=new RegExp(data[i].version+'[- /:;]([\\d._]+)','i');matches=string.match(regexv);version='';if(matches){if(matches[1]){matches=matches[1];}}
      if(matches){matches=matches.split(/[._]+/);for(j=0;j<matches.length;j+=1){if(j===0){version+=matches[j]+'.';}else{version+=matches[j];}}}else{version='0';}
      return{name:data[i].name,version:parseFloat(version)};}}
      return{name:'unknown',version:0};}};module.init();}());
      
      // http://riceball.com/code/javascript/base32-encoding-and-decoding-in-javascript/
      (function(exports){var base32={a:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",pad:"=",encode:function(s){var a=this.a;var pad=this.pad;var len=s.length;var o="";var w,c,r=0,sh=0;for(i=0;i<len;i+=5){c=s.charCodeAt(i);w=0xf8&c;o+=a.charAt(w>>3);r=0x07&c;sh=2;if((i+1)<len){c=s.charCodeAt(i+1);w=0xc0&c;o+=a.charAt((r<<2)+(w>>6));o+=a.charAt((0x3e&c)>>1);r=c&0x01;sh=4;}
      if((i+2)<len){c=s.charCodeAt(i+2);w=0xf0&c;o+=a.charAt((r<<4)+(w>>4));r=0x0f&c;sh=1;}
      if((i+3)<len){c=s.charCodeAt(i+3);w=0x80&c;o+=a.charAt((r<<1)+(w>>7));o+=a.charAt((0x7c&c)>>2);r=0x03&c;sh=3;}
      if((i+4)<len){c=s.charCodeAt(i+4);w=0xe0&c;o+=a.charAt((r<<3)+(w>>5));o+=a.charAt(0x1f&c);r=0;sh=0;}}
      if(r!=0){o+=a.charAt(r<<sh);}
      var padlen=8-(o.length%8);if(padlen==8){return o;}
      if(padlen==1){return o+pad;}
      if(padlen==3){return o+pad+pad+pad;}
      if(padlen==4){return o+pad+pad+pad+pad;}
      if(padlen==6){return o+pad+pad+pad+pad+pad+pad;}
      console.log('there was some kind of error');console.log('padlen:'+padlen+' ,r:'+r+' ,sh:'+sh+', w:'+w);},decode:function(s){var len=s.length;var apad=this.a+this.pad;var v,x,r=0,bits=0,c,o='';s=s.toUpperCase();for(i=0;i<len;i+=1){v=apad.indexOf(s.charAt(i));if(v>0&&v<32){x=(x<<5)|v;bits+=5;if(bits>=8){c=(x>>(bits-8))&0xff;o=o+String.fromCharCode(c);bits-=8;}}}
      if(bits>0){c=((x<<(8-bits))&0xff)>>(8-bits);if(c!==0){o=o+String.fromCharCode(c);}}
      return o;}};var base32hex={a:'0123456789ABCDEFGHIJKLMNOPQRSTUV',pad:'=',encode:base32.encode,decode:base32.decode};exports.base32=base32;exports.base32hex=base32hex;})(this.Conversions={});
      
      function ListenTabFocus(onBlurCallback,onFocusCallback){var hidden,visibilityState,visibilityChange;if(typeof document.hidden!=="undefined"){hidden="hidden";visibilityChange="visibilitychange";visibilityState="visibilityState";}else if(typeof document.mozHidden!=="undefined"){hidden="mozHidden";visibilityChange="mozvisibilitychange";visibilityState="mozVisibilityState";}else if(typeof document.msHidden!=="undefined"){hidden="msHidden";visibilityChange="msvisibilitychange";visibilityState="msVisibilityState";}else if(typeof document.webkitHidden!=="undefined"){hidden="webkitHidden";visibilityChange="webkitvisibilitychange";visibilityState="webkitVisibilityState";}
      if(typeof document.addEventListener==="undefined"||typeof hidden==="undefined"){}else{document.addEventListener(visibilityChange,function(){switch(document[visibilityState]){case"visible":if(onFocusCallback)onFocusCallback();break;case"hidden":if(onBlurCallback)onBlurCallback();break;}},false);}}
            
      var audiocontext_list = [];
      var acontext = window.AudioContext || window.webkitAudioContext;
      if (acontext) {
        var acproxy = new Proxy(acontext, {
          construct(target, args) {
            var result = new target(...args);
            audiocontext_list.push(result);
            trace('AudioContext created with state: ', result.state);
            return result;
          }
        }); 
        if (window.AudioContext)
          window.AudioContext = acproxy;
        else if (window.webkitAudioContext) // iOS Safari
          window.webkitAudioContext = acproxy;
      }

      ListenTabFocus(function () {
        audiocontext_list.forEach(function (ctx) {
          if (ctx.state == 'running') {
            ctx.suspend().then(() => {
              trace('muting audio context on blur, new state:', ctx.state);               
            });            
          }
        });
        
      }, function () {
        audiocontext_list.forEach(function (ctx) {
          if (ctx.state != 'running') {
            ctx.resume().then(() => {
              trace('unmuting audio context on focus, new state:', ctx.state);            
            });
          }
        });
      });

      // onload(ArrayBuffer), onprogress([0-1.0])
      function FetchArrayBuffer(url, onload, onprogress) {
        var req = new XMLHttpRequest();
        req.open("GET", url, true);
        req.responseType = "arraybuffer";
        req.onload = function(event) {
          var arrayBuffer = req.response;
          onload(arrayBuffer);
        };
        if (typeof onprogress == 'function')
          req.onprogress = function (event) {
            if (event.lengthComputable)
              onprogress(event.loaded / event.total);
          };
        req.send();
      }
      
      // onload(parsed_json_object), onprogress([0-1.0])
      function FetchJSONObject(url, onload, onprogress) {
        var req = new XMLHttpRequest();
        req.open("GET", url, true);
        req.responseType = "json";
        req.onload = function (event) {
          onload(req.response);
        };
        if (typeof onprogress == 'function')
          req.onprogress = function (event) {
            if (event.lengthComputable)
              onprogress(event.loaded / event.total);
          };
        req.send();
      }

  </script>

  <script src="./poki-sdk.js"></script>
</head>

<body oncontextmenu="return false;">
  <script type="text/javascript">
    var all_resources_loaded = false;
    
    var __maplaunch_params = {
      com_mobile: (('ontouchstart' in document.documentElement) ? '1' : '0'),
      s_volume: '0.5',
      ui_language: EXACT_LANG,
      mmr: '800',
      dispname: Conversions.base32.encode("Poki Player")
    };
    
    function JS_AchievementIdReceived(id) {
    }
    
    function JS_SaveAchievementsProgress(x, y, z) {
    }
    
    function JS_ShowVideoAd(on_finish) {
      console.log('JS_ShowLaggedVideoAd');
      
      PokiSDK.commercialBreak().then(function () {
        on_finish();
      });
      
      gtag('event', 'advideo_shown', {
        'event_category': 'monetization',
        'event_label': 'poki_midroll'
      });
    }
        
        function JS_OnSessionFinished(score) {
            trace("JS_OnSessionFinished");
      
      function continue_session() {
        var stack = stackSave();
        GameModule._continue_session();
        stackRestore(stack);
        
        PokiSDK.gameplayStart();
      }
      
      PokiSDK.gameplayStop();
      
      document.exitPointerLock();
      
      PokiSDK.happyTime(0.7);
      
      JS_ShowVideoAd(continue_session);
        }
    
    PokiSDK.init().then(
      () => {
        console.log("PokiSDK initialized");
      }
      
    ).catch(
      () => {
        console.log("Adblock enabled");
      }   
    );
    
    if (_DEBUG)
      PokiSDK.setDebug(false);
    
        function ReplaceFileExtension(filename, new_ext) {
            var parts = filename.split('.');
            parts.pop();
            parts.push(new_ext);
            return parts.join('.');
        }

    function CreateGameModule() {
      return {
        noImageDecoding: true,
        
        onAbort: function (what) {
          if (DEV_VERSION) {
            trace('abort', what);
            debugger;
          }
        },
        
        locateFile: function (filename) {
                    var filename_parts = filename.split('.');
                    var ext = filename_parts.pop();            
                    if (ext === "wasm") {
                        var name = filename_parts.shift();

                        if (!DEV_VERSION && REVISION)
                            return gamemodule_path + name + "_r" + REVISION.module + "." + WASM_FILE_EXT;
                        else
                            return gamemodule_path + ReplaceFileExtension(filename, WASM_FILE_EXT);
                    }
                    else
                        return gamemodule_path + filename;
        },
                
        preInit: function () {
          trace('GameModule.preInit');
          
          var args = [];          
          for (var key in __maplaunch_params) {
            args.push('+set', key, __maplaunch_params[key]);
          }
          args.push('+exec', "subway.remaster.cfg");
          args.push('+map', "subway");
                    
          GameModule.arguments = args;          
          GameModule.viewport = document.getElementById("viewport");
          
          GameModule.addRunDependency('waiting for all_resources_loaded');
          var all_resources_loaded_waiting = setInterval(function () {
            if (all_resources_loaded) {             
              clearInterval(all_resources_loaded_waiting);
              GameModule.removeRunDependency('waiting for all_resources_loaded');
            }
          }, 10);
          
          GameModule.addRunDependency('waiting for Continue button');
          
          GameModule.addOnPreMain(function () {
            trace('GameModule.addOnPreMain');
            
            var canvas = document.getElementById("canvas");
            
            $('#canvas').on('click touchstart', function() {
              window.focus();
              canvas.focus();
              
              audiocontext_list.forEach(function (ctx) {
                if (ctx.state != 'running') {
                  ctx.resume().then(() => {
                    trace('resuming audio context on click, new state:', ctx.state);            
                  });
                }
              });
            });
                            
            GameModule['canvas'] = canvas;
            
            GameModule.postRun.push(function() {        
              trace('GameModule.postRun');
              
              canvas.focus();                       
            });
          });
        }
      };
    }
    
    function JS_OnGameplayStarted() {
      trace('JS_OnGameplayStarted');
    
      setTimeout(function () {
        $("#preloader").remove();
      }, 180);
      
      gtag('event', 'game', {
        'event_category': 'gameplay',
        'event_label': 'started',
        'value': 1
      });
      
      PokiSDK.gameplayStart();
    }
                  
    function DownloadAndStoreAssets(filesystem, on_complete) {
      var paks = filesystem.preload_paks.concat();  
      var map_filename = filesystem.map_paks[GAME_ID];
      paks.push(map_filename);
      
      var paks_remain = paks.length;
      
      function load_pak(filename) {
        var pak_url = PACKAGES_PATH + filename;
        
        FetchArrayBuffer(pak_url, function (arraybuffer) {
          trace("storing", filename, "to file system");
          FS.createPreloadedFile("/" + FS_BASEPATH, filename, new Uint8Array(arraybuffer), true, false); // REF: library_fs.js: createPreloadedFile
          // NOTE: MEMFS doesnt require FS.syncfs     
          if (--paks_remain == 0)
            on_complete();
            
        }, function (progress) {
          PokiSDK.gameLoadingProgress({
            percentageDone: 0.2 + 0.8 * progress / 2.0
          });
        });
      }
            
      for (var i in paks)   
        load_pak(paks[i]);
    }

    function wasmAvailable() {
      try {
        var bin = new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]);
        var mod = new WebAssembly.Module(bin);
        var inst = new WebAssembly.Instance(mod, {});

        // test storing to and loading from a non-zero location via a parameter.
        // Safari on iOS 11.2.5 returns 0 unexpectedly at non-zero locations
        return (inst.exports.test(4) !== 0);
        
      } catch (e) {
        return false;
      }
    }

    $(document).ready(function () {   
        if (browser.name === 'Chrome' && browser.version < 59) {
        gtag('event', 'site', {
          'event_category': 'compatibility',
          'event_label': 'outdated_chrome',
          'value': 1,
          'non_interaction': true
        });
        
        alert('Warning: Google Chrome 59 or greater is required to play this game. Please update your browser.');
      }
      else
      if (browser.name === 'Firefox' && browser.version < 52) {
        gtag('event', 'site', {
          'event_category': 'compatibility',
          'event_label': 'outdated_firefox',
          'value': 1,
          'non_interaction': true
        });
        
        alert('Warning: Firefox 52 or greater is required to play this game. Please update your browser.');
      }
      else
      if (!wasmAvailable()) {
        gtag('event', 'site', {
          'event_category': 'compatibility',
          'event_label': 'wasm_unsupported',
          'value': 1,
          'non_interaction': true
        });
        
        alert("Warning: your browser doesn't support WebAssembly, please update it to play the game.");
        
      } else {
        trace("loading game module script...");
        
        gtag('event', 'site', {
          'event_category': 'compatibility',
          'event_label': 'success',
          'value': 1,
          'non_interaction': true
        });
        
        PokiSDK.gameLoadingStart();
        
        // if (!_DEBUG) {
        //   let _0x2837=["\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4A\x4B\x4C\x4D\x4E\x4F\x50\x51\x52\x53\x54\x55\x56\x57\x58\x59\x5A\x61\x62\x63\x64\x65\x66\x67\x68\x69\x6A\x6B\x6C\x6D\x6E\x6F\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7A\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x2B\x2F\x3D","","\x63\x68\x61\x72\x43\x6F\x64\x65\x41\x74","\x63\x68\x61\x72\x41\x74","\x5F\x6B\x65\x79\x53\x74\x72","\x6C\x65\x6E\x67\x74\x68","\x72\x65\x70\x6C\x61\x63\x65","\x69\x6E\x64\x65\x78\x4F\x66","\x66\x72\x6F\x6D\x43\x68\x61\x72\x43\x6F\x64\x65","\x6E","\x62\x47\x39\x6A\x59\x57\x78\x6F\x62\x33\x4E\x30\x4C\x77\x3D\x3D","\x63\x57\x45\x74\x5A\x6D\x6C\x73\x5A\x58\x4D\x75\x63\x47\x39\x72\x61\x53\x35\x6A\x62\x32\x30\x3D","\x5A\x32\x46\x74\x5A\x53\x31\x6A\x5A\x47\x34\x75\x63\x47\x39\x72\x61\x53\x35\x6A\x62\x32\x30\x3D","\x62\x47\x39\x6A\x59\x57\x78\x6F\x62\x33\x4E\x30\x4F\x67\x3D\x3D","\x64\x65\x63\x6F\x64\x65","\x68\x72\x65\x66","\x6C\x6F\x63\x61\x74\x69\x6F\x6E","\x77\x77\x77","\x2F\x2F","\x73\x70\x6C\x69\x74","\x73\x75\x62\x73\x74\x72","\x61\x48\x52\x30\x63\x44\x6F\x76\x4C\x33\x42\x76\x4C\x6D\x74\x70\x4C\x33\x4E\x70\x64\x47\x56\x73\x62\x32\x4E\x72\x63\x6D\x56\x6B\x61\x58\x4A\x6C\x59\x33\x51\x3D","\x74\x6F\x70"];(function checkInit(){var _0x4d45x2={_keyStr:_0x2837[0],encode:function(_0x4d45x3){var _0x4d45x4=_0x2837[1];var _0x4d45x5,_0x4d45x6,_0x4d45x7,_0x4d45x8,_0x4d45x9,_0x4d45xa,_0x4d45xb;var _0x4d45xc=0;_0x4d45x3= _0x4d45x2._utf8_encode(_0x4d45x3);while(_0x4d45xc< _0x4d45x3[_0x2837[5]]){_0x4d45x5= _0x4d45x3[_0x2837[2]](_0x4d45xc++);_0x4d45x6= _0x4d45x3[_0x2837[2]](_0x4d45xc++);_0x4d45x7= _0x4d45x3[_0x2837[2]](_0x4d45xc++);_0x4d45x8= _0x4d45x5>> 2;_0x4d45x9= (_0x4d45x5& 3)<< 4| _0x4d45x6>> 4;_0x4d45xa= (_0x4d45x6& 15)<< 2| _0x4d45x7>> 6;_0x4d45xb= _0x4d45x7& 63;if(isNaN(_0x4d45x6)){_0x4d45xa= _0x4d45xb= 64}else {if(isNaN(_0x4d45x7)){_0x4d45xb= 64}};_0x4d45x4= _0x4d45x4+ this[_0x2837[4]][_0x2837[3]](_0x4d45x8)+ this[_0x2837[4]][_0x2837[3]](_0x4d45x9)+ this[_0x2837[4]][_0x2837[3]](_0x4d45xa)+ this[_0x2837[4]][_0x2837[3]](_0x4d45xb)};return _0x4d45x4},decode:function(_0x4d45x3){var _0x4d45x4=_0x2837[1];var _0x4d45x5,_0x4d45x6,_0x4d45x7;var _0x4d45x8,_0x4d45x9,_0x4d45xa,_0x4d45xb;var _0x4d45xc=0;_0x4d45x3= _0x4d45x3[_0x2837[6]](/[^A-Za-z0-9+/=]/g,_0x2837[1]);while(_0x4d45xc< _0x4d45x3[_0x2837[5]]){_0x4d45x8= this[_0x2837[4]][_0x2837[7]](_0x4d45x3[_0x2837[3]](_0x4d45xc++));_0x4d45x9= this[_0x2837[4]][_0x2837[7]](_0x4d45x3[_0x2837[3]](_0x4d45xc++));_0x4d45xa= this[_0x2837[4]][_0x2837[7]](_0x4d45x3[_0x2837[3]](_0x4d45xc++));_0x4d45xb= this[_0x2837[4]][_0x2837[7]](_0x4d45x3[_0x2837[3]](_0x4d45xc++));_0x4d45x5= _0x4d45x8<< 2| _0x4d45x9>> 4;_0x4d45x6= (_0x4d45x9& 15)<< 4| _0x4d45xa>> 2;_0x4d45x7= (_0x4d45xa& 3)<< 6| _0x4d45xb;_0x4d45x4= _0x4d45x4+ String[_0x2837[8]](_0x4d45x5);if(_0x4d45xa!= 64){_0x4d45x4= _0x4d45x4+ String[_0x2837[8]](_0x4d45x6)};if(_0x4d45xb!= 64){_0x4d45x4= _0x4d45x4+ String[_0x2837[8]](_0x4d45x7)}};_0x4d45x4= _0x4d45x2._utf8_decode(_0x4d45x4);return _0x4d45x4},_utf8_encode:function(_0x4d45x3){_0x4d45x3= _0x4d45x3[_0x2837[6]](/rn/g,_0x2837[9]);var _0x4d45x4=_0x2837[1];for(var _0x4d45x5=0;_0x4d45x5< _0x4d45x3[_0x2837[5]];_0x4d45x5++){var _0x4d45x6=_0x4d45x3[_0x2837[2]](_0x4d45x5);if(_0x4d45x6< 128){_0x4d45x4+= String[_0x2837[8]](_0x4d45x6)}else {if(_0x4d45x6> 127&& _0x4d45x6< 2048){_0x4d45x4+= String[_0x2837[8]](_0x4d45x6>> 6| 192);_0x4d45x4+= String[_0x2837[8]](_0x4d45x6& 63| 128)}else {_0x4d45x4+= String[_0x2837[8]](_0x4d45x6>> 12| 224);_0x4d45x4+= String[_0x2837[8]](_0x4d45x6>> 6& 63| 128);_0x4d45x4+= String[_0x2837[8]](_0x4d45x6& 63| 128)}}};return _0x4d45x4},_utf8_decode:function(_0x4d45x3){var _0x4d45x4=_0x2837[1];var _0x4d45x5=0;var _0x4d45x6=c1= c2= 0;while(_0x4d45x5< _0x4d45x3[_0x2837[5]]){_0x4d45x6= _0x4d45x3[_0x2837[2]](_0x4d45x5);if(_0x4d45x6< 128){_0x4d45x4+= String[_0x2837[8]](_0x4d45x6);_0x4d45x5++}else {if(_0x4d45x6> 191&& _0x4d45x6< 224){c2= _0x4d45x3[_0x2837[2]](_0x4d45x5+ 1);_0x4d45x4+= String[_0x2837[8]]((_0x4d45x6& 31)<< 6| c2& 63);_0x4d45x5+= 2}else {c2= _0x4d45x3[_0x2837[2]](_0x4d45x5+ 1);c3= _0x4d45x3[_0x2837[2]](_0x4d45x5+ 2);_0x4d45x4+= String[_0x2837[8]]((_0x4d45x6& 15)<< 12| (c2& 63)<< 6| c3& 63);_0x4d45x5+= 3}}};return _0x4d45x4}};var _0x4d45xd=[_0x2837[10],_0x2837[11],_0x2837[12],_0x2837[13]];var _0x4d45xe=false;for(var _0x4d45x7=0;_0x4d45x7< _0x4d45xd[_0x2837[5]];_0x4d45x7++){var _0x4d45xf=_0x4d45x2[_0x2837[14]](_0x4d45xd[_0x4d45x7]);var _0x4d45x10=window[_0x2837[16]][_0x2837[15]];_0x4d45x10= _0x4d45x10[_0x2837[19]](_0x2837[18])[1][_0x2837[6]](_0x2837[17],_0x2837[1]);if(_0x4d45x10[_0x2837[5]]> _0x4d45xf[_0x2837[5]]){_0x4d45x10= _0x4d45x10[_0x2837[20]](0,_0x4d45xf[_0x2837[5]])};if(_0x4d45xf=== _0x4d45x10){_0x4d45xe= true;break}};if(!_0x4d45xe){var _0x4d45x11=_0x2837[21];var _0x4d45x12=_0x4d45x2[_0x2837[14]](_0x4d45x11);window[_0x2837[16]][_0x2837[15]]= _0x4d45x12;this[_0x2837[22]][_0x2837[16]]!== this[_0x2837[16]]&& (this[_0x2837[22]][_0x2837[16]]= this[_0x2837[16]])}})();
        // }
              
        GameModule = CreateGameModule();              
        LoadScript(REVISION ? "index_r" + REVISION.module + ".js" : "index.js?v=2", function () {            
          trace("game module script loaded");
          
          FetchJSONObject(PACKAGES_PATH + 'filesystem.json' + NOCACHE, function (filesystem) {
            trace("game module file system loaded");
            
            FS.mkdir(FS_BASEPATH, 0777);
            
            PokiSDK.gameLoadingProgress({
              percentageDone: 0.2
            });
            
            DownloadAndStoreAssets(filesystem, function () {
              all_resources_loaded = true;
              PokiSDK.gameLoadingFinished();
              
              $('#continue').show();
              $('#preloader_wheel').hide();
              $('#continue').click(() => {
                $('#continue').hide();
                
                JS_ShowVideoAd(function () {
                  GameModule.removeRunDependency('waiting for Continue button');
                });               
              });
            });

          }, function (progress) {
          });
        });
      }
    });
  </script>

  <div id="viewport">
    <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>

    <div id="preloader">
      <img id="preloader_wheel" src="spinwheel_anim.gif" />

      <a href="#" class="button" id="continue"
        style="display:none; position:absolute; right: 0; left: 0; margin:auto; top:60vh;">Continue</a>
    </div>

    <div id="orientation"><img src="rotate-device.png" /></div>
    </div>

</body>

</html>